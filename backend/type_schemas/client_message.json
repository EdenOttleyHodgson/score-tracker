{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "title": "ClientMessage",
  "oneOf": [
    {
      "type": "object",
      "properties": {
        "admin_pass": {
          "type": "string"
        },
        "code": {
          "$ref": "#/$defs/RoomCode"
        },
        "kind": {
          "type": "string",
          "const": "CreateRoom"
        }
      },
      "required": [
        "kind",
        "code",
        "admin_pass"
      ]
    },
    {
      "type": "object",
      "properties": {
        "code": {
          "$ref": "#/$defs/RoomCode"
        },
        "kind": {
          "type": "string",
          "const": "JoinRoom"
        },
        "name": {
          "type": "string"
        }
      },
      "required": [
        "kind",
        "code",
        "name"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "type": "string",
          "const": "LeaveRoom"
        },
        "room_code": {
          "$ref": "#/$defs/RoomCode"
        }
      },
      "required": [
        "kind",
        "room_code"
      ]
    },
    {
      "type": "object",
      "properties": {
        "code": {
          "$ref": "#/$defs/RoomCode"
        },
        "id": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "kind": {
          "type": "string",
          "const": "RemoveFromRoom"
        }
      },
      "required": [
        "kind",
        "code",
        "id"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "type": "string",
          "const": "DeleteRoom"
        },
        "room_code": {
          "$ref": "#/$defs/RoomCode"
        }
      },
      "required": [
        "kind",
        "room_code"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "type": "string",
          "const": "RequestAdmin"
        },
        "password": {
          "type": "string"
        },
        "room": {
          "$ref": "#/$defs/RoomCode"
        }
      },
      "required": [
        "kind",
        "room",
        "password"
      ]
    },
    {
      "type": "object",
      "properties": {
        "amount": {
          "type": "integer",
          "format": "int64"
        },
        "kind": {
          "type": "string",
          "const": "BlessScore"
        },
        "to": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        }
      },
      "required": [
        "kind",
        "to",
        "amount"
      ]
    },
    {
      "type": "object",
      "properties": {
        "amount": {
          "type": "integer",
          "format": "int64"
        },
        "from": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "kind": {
          "type": "string",
          "const": "RemoveScore"
        }
      },
      "required": [
        "kind",
        "from",
        "amount"
      ]
    },
    {
      "type": "object",
      "properties": {
        "amount": {
          "type": "integer",
          "format": "int64"
        },
        "kind": {
          "type": "string",
          "const": "GiveScore"
        },
        "to": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        }
      },
      "required": [
        "kind",
        "to",
        "amount"
      ]
    },
    {
      "type": "object",
      "properties": {
        "amount": {
          "type": "integer",
          "format": "int64"
        },
        "from": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "kind": {
          "type": "string",
          "const": "TransferScore"
        },
        "to": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        }
      },
      "required": [
        "kind",
        "from",
        "to",
        "amount"
      ]
    },
    {
      "type": "object",
      "properties": {
        "description": {
          "type": "string"
        },
        "kind": {
          "type": "string",
          "const": "CreatePot"
        },
        "room_code": {
          "$ref": "#/$defs/RoomCode"
        },
        "score_requirement": {
          "type": "integer",
          "format": "int64"
        }
      },
      "required": [
        "kind",
        "room_code",
        "score_requirement",
        "description"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "type": "string",
          "const": "JoinPot"
        },
        "pot_id": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "room_code": {
          "$ref": "#/$defs/RoomCode"
        }
      },
      "required": [
        "kind",
        "room_code",
        "pot_id"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "type": "string",
          "const": "ResolvePot"
        },
        "pot_id": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "room_id": {
          "$ref": "#/$defs/RoomCode"
        },
        "winner": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        }
      },
      "required": [
        "kind",
        "room_id",
        "pot_id",
        "winner"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "type": "string",
          "const": "CreateWager"
        },
        "name": {
          "type": "string"
        },
        "outcomes": {
          "type": "array",
          "items": {
            "$ref": "#/$defs/WagerOutcome"
          }
        },
        "room_id": {
          "$ref": "#/$defs/RoomCode"
        }
      },
      "required": [
        "kind",
        "room_id",
        "name",
        "outcomes"
      ]
    },
    {
      "type": "object",
      "properties": {
        "amount": {
          "type": "integer",
          "format": "int64"
        },
        "kind": {
          "type": "string",
          "const": "JoinWager"
        },
        "outcome_id": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "room_id": {
          "$ref": "#/$defs/RoomCode"
        },
        "wager_id": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        }
      },
      "required": [
        "kind",
        "room_id",
        "wager_id",
        "outcome_id",
        "amount"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "type": "string",
          "const": "ResolveWager"
        },
        "outcome_id": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "room_id": {
          "$ref": "#/$defs/RoomCode"
        },
        "wager_id": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        }
      },
      "required": [
        "kind",
        "room_id",
        "wager_id",
        "outcome_id"
      ]
    },
    {
      "type": "object",
      "properties": {
        "kind": {
          "type": "string",
          "const": "Debug"
        }
      },
      "required": [
        "kind"
      ]
    }
  ],
  "$defs": {
    "RoomCode": {
      "type": "string",
      "max_length": "8",
      "min_length": "8"
    },
    "WagerOutcome": {
      "type": "object",
      "properties": {
        "description": {
          "type": "string"
        },
        "id": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        },
        "name": {
          "type": "string"
        },
        "odds": {
          "type": "integer",
          "format": "uint",
          "minimum": 0
        }
      },
      "required": [
        "name",
        "id",
        "description",
        "odds"
      ]
    }
  }
}